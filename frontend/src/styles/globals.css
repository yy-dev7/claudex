@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  color-scheme: light;
}

:root[data-theme='dark'] {
  color-scheme: dark;
}

html,
body,
#root {
  @apply bg-white text-neutral-900 dark:bg-surface-dark dark:text-white;
}

#root {
  min-height: 100vh;
  min-height: 100dvh;
}

@layer utilities {
  .h-viewport {
    height: 100vh;
    height: 100dvh;
  }

  .min-h-viewport {
    min-height: 100vh;
    min-height: 100dvh;
  }

  .break-word-wrap {
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  .scrollbar-none {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .scrollbar-none::-webkit-scrollbar {
    display: none;
  }

  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fade-in 0.3s ease-out;
  }

  @keyframes float {
    0%,
    100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-6px);
    }
  }

  .animate-float {
    animation: float 3s ease-in-out infinite;
  }

  @keyframes bounce-vertical {
    0%,
    100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-8px);
    }
  }

  .animate-bounce-vertical {
    animation: bounce-vertical 2s ease-in-out infinite;
  }

  .animate-bounce-vertical:hover {
    animation-play-state: paused;
  }

  .animate-in {
    animation: enter 0.2s ease-out;
  }

  .fade-in {
    --tw-enter-opacity: 0;
  }

  .slide-in-from-top-2 {
    --tw-enter-translate-y: -0.5rem;
  }

  .slide-in-from-left-3 {
    --tw-enter-translate-x: -0.75rem;
  }

  .zoom-in-50 {
    --tw-enter-scale: 0.5;
  }

  @keyframes enter {
    from {
      opacity: var(--tw-enter-opacity, 1);
      transform: translate(var(--tw-enter-translate-x, 0), var(--tw-enter-translate-y, 0))
        scale(var(--tw-enter-scale, 1));
    }
    to {
      opacity: 1;
      transform: translate(0, 0) scale(1);
    }
  }
}

body {
  max-width: 100vw;
}

@media (prefers-reduced-motion: reduce) {
  * {
    transition: none !important;
  }
}

/* Global scrollbar styling - universal selectors */
* {
  scrollbar-width: thin;
  scrollbar-color: theme('colors.neutral.300') transparent;
}

*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

*::-webkit-scrollbar-track {
  background: transparent;
}

*::-webkit-scrollbar-thumb {
  background-color: theme('colors.neutral.300');
  border-radius: 4px;
  transition: background-color 0.2s ease;
}

*::-webkit-scrollbar-thumb:hover {
  background-color: theme('colors.neutral.400');
}

*::-webkit-scrollbar-corner {
  background: transparent;
}

/* Dark mode scrollbar styling */
.dark * {
  scrollbar-color: theme('colors.neutral.600') transparent;
}

.dark *::-webkit-scrollbar-thumb {
  background-color: theme('colors.neutral.600');
}

.dark *::-webkit-scrollbar-thumb:hover {
  background-color: theme('colors.neutral.500');
}

/* Accessibility: Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  *::-webkit-scrollbar-thumb {
    transition: none;
  }
}

/* Dark mode overrides for react-diff-view */
.dark {
  --diff-text-color: #e5e5e5;
  --diff-background-color: transparent;
  --diff-gutter-insert-background-color: #1a3324;
  --diff-gutter-delete-background-color: #3a1e1f;
  --diff-code-insert-background-color: #1f3a28;
  --diff-code-delete-background-color: #3f2326;
  --diff-code-insert-edit-background-color: #2d5a3d;
  --diff-code-delete-edit-background-color: #5a2d32;
}

/* Hide old line number column (first gutter) in unified diff view */
.diff-viewer-container .diff-unified > colgroup > col:nth-child(1) {
  width: 0 !important;
  min-width: 0 !important;
  padding: 0 !important;
}

.diff-viewer-container .diff-unified > tbody > tr > td:nth-child(1) {
  width: 0 !important;
  min-width: 0 !important;
  padding: 0 !important;
  overflow: hidden !important;
  border: none !important;
}

/* Style the new line numbers gutter (second column) */
.diff-viewer-container .diff-unified > colgroup > col:nth-child(2) {
  width: 50px !important;
}

.diff-viewer-container .diff-unified .diff-gutter {
  min-width: 50px !important;
  padding: 0 10px !important;
  white-space: nowrap !important;
}

/* Add spacing between lines */
.diff-viewer-container .diff-unified .diff-line {
  line-height: 1.6 !important;
}

.diff-viewer-container .diff-unified .diff-code {
  padding: 2px 8px 2px 12px !important;
}

.mermaid-container {
  font-family:
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    'Segoe UI',
    Roboto,
    'Helvetica Neue',
    Arial,
    sans-serif;
}

.mermaid-container svg {
  display: block;
  width: 100% !important;
  max-width: 100%;
  height: auto !important;
}

.mermaid-container svg text {
  font-size: 10px !important;
  font-family:
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    'Segoe UI',
    Roboto,
    'Helvetica Neue',
    Arial,
    sans-serif !important;
}

.mermaid-container svg .node rect,
.mermaid-container svg .node circle,
.mermaid-container svg .node ellipse,
.mermaid-container svg .node polygon {
  stroke-width: 1px;
}

.mermaid-container svg .edgeLabel {
  font-size: 9px !important;
}

.mermaid-container svg .nodeLabel {
  font-size: 10px !important;
}
